package main;

import service.GameTetris;
import ui.JFrameGame;
import ui.JPanelGame;
import control.GameControl;
import control.PlayerControl;
import dto.GameDto;


/**
 * 所有类在Main中组装
 * 
 * @author J
 */
public class Main {
	
	
	public static void main(String[] args){
		/**
		 * 按照游戏调用逻辑顺序
		 * PlayerControl ---> GameControl ---> GameService ---> GameDto
		 * JPanelGame ---> (get) (GameService --->(set) GameDto) ---> GameControl --->接口
		 * 所以先创建GameDto依次满足调用条件
		 */
		//创建GameDto对象（主函数拿到游戏所有数据）
		GameDto dto = new GameDto();
		//创建一个JPanelGame对象（主函数里拿到游戏面板）
		JPanelGame panel = new JPanelGame(dto);
		//创建GameService对象（主函数拿到游戏逻辑，载入游戏数据源）
		GameTetris service = new GameTetris(dto);
		//创建GameControl对象（主函数拿到游戏控制器，连接了游戏面板和逻辑）
		GameControl gameControl = new GameControl(panel, service);
		//将游戏控制器对象设置到面板上
		panel.setGameControl(gameControl);
		//创建PlayerControl对象（主函数拿到玩家控制器，连接游戏控制器）
		PlayerControl control = new PlayerControl(gameControl); 
		//安装玩家控制器
		panel.setGameControl(control);
		//创建JFrameGame对象（主函数拿到游戏窗口，安装游戏面板）
		new JFrameGame(panel);
	}
	
	
}
